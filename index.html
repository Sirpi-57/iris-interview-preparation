<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IRIS</title>
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Application Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3>IRIS</h3>
                <p>Interview Readiness & Improvement System</p>
            </div>
            <ul class="nav-items">
                <li class="nav-item active" data-target="landing">
                    <i class="fas fa-home"></i> Home
                </li>
                <li class="nav-item" data-target="upload">
                    <i class="fas fa-upload"></i> Upload
                </li>
                <li class="nav-item" data-target="analysis" id="nav-analysis">
                    <i class="fas fa-chart-pie"></i> Analysis
                    <span class="status-indicator locked"><i class="fas fa-lock"></i></span>
                </li>
                <li class="nav-item" data-target="prep-plan" id="nav-prep-plan">
                    <i class="fas fa-clipboard-list"></i> Prep Plan
                    <span class="status-indicator locked"><i class="fas fa-lock"></i></span>
                </li>
                <li class="nav-item" data-target="mock-interview" id="nav-interview">
                    <i class="fas fa-video"></i> Mock Interview
                    <span class="status-indicator locked"><i class="fas fa-lock"></i></span>
                </li>
                <li class="nav-item" data-target="performance" id="nav-performance">
                    <i class="fas fa-chart-line"></i> Performance
                    <span class="status-indicator locked"><i class="fas fa-lock"></i></span>
                </li>
                <li class="nav-item" data-target="history" id="nav-history">
                    <i class="fas fa-history"></i> History
                    <span class="status-indicator locked"><i class="fas fa-lock"></i></span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <p>&copy; 2025 IRIS</p>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main id="content">
            <!-- Landing Page -->
            <section id="landing" class="content-section active">
                <div class="hero-section">
                    <div class="container text-center">
                        <div class="logo-container">
                            <i class="fas fa-comments iris-logo"></i>
                        </div>
                        <h1>Welcome to IRIS</h1>
                        <h2>Interview Readiness & Improvement System</h2>
                        <p class="lead">Your AI-powered interview coach that helps you prepare, practice, and perform better in job interviews.</p>
                        <div class="features-grid">
                            <div class="feature-card">
                                <i class="fas fa-file-alt"></i>
                                <h3>Resume Analysis</h3>
                                <p>Get insights on how your resume matches specific job requirements</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-tasks"></i>
                                <h3>Personalized Prep</h3>
                                <p>Receive a customized study plan based on your skills and the job</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-video"></i>
                                <h3>Mock Interviews</h3>
                                <p>Practice with our AI interviewer in a realistic setting</p>
                            </div>
                            <div class="feature-card">
                                <i class="fas fa-chart-bar"></i>
                                <h3>Performance Analysis</h3>
                                <p>Get detailed feedback and track your improvement over time</p>
                            </div>
                        </div>
                        <button class="btn btn-primary btn-lg get-started-btn" id="getStartedBtn">Get Started</button>
                    </div>
                </div>
            </section>

            <!-- Upload Resume & Job Description -->
            <section id="upload" class="content-section">
                <div class="container">
                    <h2>Upload Your Resume & Job Description</h2>
                    <p class="section-description">Let's analyze your resume against a specific job to create a personalized interview preparation plan.</p>
                    
                    <div class="card">
                        <div class="card-body">
                            <form id="resumeUploadForm" enctype="multipart/form-data">
                                <div class="mb-3">
                                    <label for="resumeFile" class="form-label">Upload Your Resume (PDF)</label>
                                    <input type="file" class="form-control" id="resumeFile" name="resumeFile" accept=".pdf" required>
                                </div>
                                <div class="mb-3">
                                    <label for="jobDescription" class="form-label">Job Description</label>
                                    <textarea class="form-control" id="jobDescription" name="jobDescription" rows="6" placeholder="Paste the complete job description here..." required></textarea>
                                </div>
                                <button type="submit" class="btn btn-primary" id="analyzeBtn">Analyze Resume</button>
                            </form>
                        </div>
                    </div>

                    <div id="uploadProgress" class="progress-container mt-4" style="display: none;">
                        <h4>Analyzing Your Resume...</h4>
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                        </div>
                        <p id="progressMessage">Uploading files...</p>
                    </div>
                </div>
            </section>

            <!-- Resume Analysis Results -->
            <section id="analysis" class="content-section">
                <div class="container">
                    <h2>Resume Analysis Results</h2>
                    <p class="section-description">Here's how your resume matches with the job requirements</p>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card mb-4">
                                <div class="card-body text-center">
                                    <h3>Match Score</h3>
                                    <div class="match-score-circle">
                                        <span id="matchScore">--</span><span>%</span>
                                    </div>
                                    <p id="matchScoreDescription">Loading analysis...</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h3>Match Analysis</h3>
                                    <p id="matchAnalysis">Loading analysis...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3>Key Strengths</h3>
                                </div>
                                <div class="card-body">
                                    <ul id="keyStrengthsList" class="list-group list-group-flush">
                                        <li class="list-group-item text-center">Loading strengths...</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3>Skill Gaps</h3>
                                </div>
                                <div class="card-body">
                                    <ul id="skillGapsList" class="list-group list-group-flush">
                                        <li class="list-group-item text-center">Loading gaps...</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <h3>Resume Improvement Suggestions</h3>
                        </div>
                        <div class="card-body">
                            <div id="resumeImprovements">
                                <p class="text-center">Loading suggestions...</p>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header"><h3>Resume Resources</h3></div>
                        <div class="card-body">
                            <p>Consider these external resources for professional resume templates and examples:</p>
                            <ul>
                                <li><a href="https://flowcv.com/" target="_blank" rel="noopener noreferrer">FlowCV Resume Builder</a></li>
                                <li><a href="https://resumake.io/" target="_blank" rel="noopener noreferrer">Resumake.io (Free Templates)</a></li>
                                <li><a href="https://www.canva.com/resumes/templates/" target="_blank" rel="noopener noreferrer">Canva Resume Templates</a></li>
                                <li><a href="https://zety.com/resume-templates" target="_blank" rel="noopener noreferrer">Zety Resume Templates</a></li>
                                <li><a href="https://enhancv.com/resume-examples/" target="_blank" rel="noopener noreferrer">Enhancv Examples</a></li>
                            </ul>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button class="btn btn-primary" id="viewPrepPlanBtn">View Preparation Plan</button>
                    </div>
                </div>
            </section>

            <!-- Interview Preparation Plan -->
            <section id="prep-plan" class="content-section">
                <div class="container">
                    <h2>Your Interview Preparation Plan</h2>
                    <p class="section-description">Based on your resume analysis, here's a personalized plan to help you prepare</p>

                    <div class="card mb-4">
                        <div class="card-header"><h3>Focus Areas</h3></div>
                        <div class="card-body"><ul id="focusAreasList" class="focus-areas-list"><li>Loading...</li></ul></div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header"><h3>Likely Interview Questions</h3></div>
                        <div class="card-body"><div id="likelyQuestions" class="accordion"><p class="text-center">Loading...</p></div></div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header"><h3>Concepts to Study</h3></div>
                                <div class="card-body"><div id="conceptsToStudy"><p class="text-center">Loading...</p></div></div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header"><h3><i class="fas fa-exclamation-triangle text-warning me-2"></i> Addressing Potential Gaps</h3></div>
                                <div class="card-body">
                                    <p class="text-muted small">Advice on how to positively frame areas where your profile might differ from the JD.</p>
                                    <div id="gapStrategies"><p class="text-center">Loading...</p></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <h3><i class="fas fa-calendar-alt me-2"></i> Dynamic Preparation Timeline</h3>
                        </div>
                        <div class="card-body">
                            <div id="dynamicTimelineControls" style="display: none;" class="mb-3 p-3 border rounded bg-light">
                                <label for="daysUntilInterview" class="form-label fw-bold">Generate a schedule:</label>
                                <div class="input-group">
                                    <span class="input-group-text">Days until interview:</span>
                                    <input type="number" class="form-control" id="daysUntilInterview" placeholder="e.g., 7" min="1" max="90" aria-label="Number of days until interview">
                                    <button class="btn btn-success" type="button" id="generateDynamicTimelineBtn">
                                        <i class="fas fa-cogs me-1"></i> Generate Timeline
                                    </button>
                                </div>
                                <div class="form-text">Enter the number of full days you have left to prepare (1-90 recommended).</div>
                            </div>
                            <div id="dynamicTimelineArea" class="mt-3">
                                <p class="text-center text-muted">Enter the number of days above and click generate to create your personalized timeline.</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="btn btn-primary btn-lg" id="startInterviewBtn">Start Mock Interview Now</button>
                    </div>
                </div>
            </section>

            <!-- Mock Interview Interface -->
            <section id="mock-interview" class="content-section">
                <div class="container-fluid">
                    <h2>Mock Interview</h2>
                    <p class="section-description">Practice with our AI interviewer in a realistic interview setting</p>
                    
                    <div class="interview-type-selector mb-4" id="interviewTypeSelector">
                        <button class="btn btn-outline-primary active" data-type="general">General</button>
                        <button class="btn btn-outline-primary" data-type="technical">Technical</button>
                        <button class="btn btn-outline-primary" data-type="behavioral">Behavioral</button>
                    </div>

                    <div class="interview-container">
                        <div class="row">
                            <!-- Candidate Video Feed -->
                            <div class="col-md-6">
                                <div class="card video-card">
                                    <div class="card-body p-0">
                                        <div class="video-container">
                                            <video id="candidateVideo" autoplay muted></video>
                                            <!-- Face detection canvas will be inserted here by JS -->
                                            <div class="video-controls">
                                                <button id="toggleCameraBtn" class="btn btn-sm btn-light">
                                                    <i class="fas fa-video"></i>
                                                </button>
                                                <button id="toggleMicBtn" class="btn btn-sm btn-light">
                                                    <i class="fas fa-microphone"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <div class="candidate-speaking-indicator">
                                            <div class="audio-waves">
                                                <span></span><span></span><span></span><span></span>
                                            </div>
                                            <span>You</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- AI Interviewer Avatar -->
                            <div class="col-md-6">
                                <div class="card avatar-card">
                                    <div class="card-body">
                                        <div class="avatar-container">
                                            <div class="avatar-circle" id="interviewerAvatar">
                                                <i class="fas fa-user-tie"></i>
                                            </div>
                                            <div class="avatar-pulse-rings">
                                                <div class="pulse-ring"></div>
                                                <div class="pulse-ring"></div>
                                                <div class="pulse-ring"></div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-footer">
                                        <div class="interviewer-speaking-indicator">
                                            <div class="audio-waves active" id="interviewerSpeakingWaves">
                                                <span></span><span></span><span></span><span></span>
                                            </div>
                                            <span>IRIS</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Interview Conversation -->
                        <div class="card mt-4 conversation-card">
                            <div class="card-header">
                                <h3>Interview Conversation</h3>
                            </div>
                            <div class="card-body">
                                <div id="conversationContainer" class="conversation-container">
                                    <!-- Messages will be added here -->
                                </div>
                                <div class="reply-container mt-3">
                                    <div class="input-group">
                                        <input type="text" id="userReplyInput" class="form-control" placeholder="Type your response or use microphone...">
                                        <button class="btn btn-primary" id="sendReplyBtn">
                                            <i class="fas fa-paper-plane"></i>
                                        </button>
                                        <button class="btn btn-secondary" id="voiceReplyBtn">
                                            <i class="fas fa-microphone"></i>
                                        </button>
                                    </div>
                                    <div id="recordingIndicator" class="recording-indicator">
                                        Recording... <span id="recordingTime">0:00</span>
                                        <button id="stopRecordingBtn" class="btn btn-sm btn-danger">
                                            <i class="fas fa-stop"></i> Stop
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer">
                                <button id="endInterviewBtn" class="btn btn-danger">End Interview & Analyze</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Performance Analysis -->
            <section id="performance" class="content-section">
                <div class="container">
                    <h2>Interview Performance Analysis</h2>
                    <p class="section-description">Here's how you performed in your mock interview</p>
    
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card mb-4">
                                <div class="card-body text-center">
                                    <h3>Overall Score</h3>
                                    <div class="performance-score-circle">
                                        <span id="overallPerformanceScore">--</span><span>%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card mb-4">
                                <div class="card-body">
                                    <h3>Overall Assessment</h3>
                                    <p id="overallAssessment">Loading assessment...</p>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="row score-cards">
                        <div class="col-md-4">
                            <div class="card mb-4 score-card">
                                <div class="card-body">
                                    <h3>Technical</h3>
                                    <div class="score-indicator">
                                        <div class="score-value" id="technicalScore">--</div>
                                        <div class="score-bar">
                                            <div class="score-progress" id="technicalScoreBar" style="width: 0%;"></div>
                                        </div>
                                    </div>
                                    <div class="score-details mt-3">
                                        <div class="score-strengths">
                                            <h5>Strengths</h5>
                                            <ul id="technicalStrengths"><li>Loading...</li></ul>
                                        </div>
                                        <div class="score-weaknesses">
                                            <h5>Areas to Improve</h5>
                                            <ul id="technicalWeaknesses"><li>Loading...</li></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card mb-4 score-card">
                                <div class="card-body">
                                    <h3>Communication</h3>
                                    <div class="score-indicator">
                                        <div class="score-value" id="communicationScore">--</div>
                                        <div class="score-bar">
                                            <div class="score-progress" id="communicationScoreBar" style="width: 0%;"></div>
                                        </div>
                                    </div>
                                    <div class="score-details mt-3">
                                        <div class="score-strengths">
                                            <h5>Strengths</h5>
                                            <ul id="communicationStrengths"><li>Loading...</li></ul>
                                        </div>
                                        <div class="score-weaknesses">
                                            <h5>Areas to Improve</h5>
                                            <ul id="communicationWeaknesses"><li>Loading...</li></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card mb-4 score-card">
                                <div class="card-body">
                                    <h3>Behavioral</h3>
                                    <div class="score-indicator">
                                        <div class="score-value" id="behavioralScore">--</div>
                                        <div class="score-bar">
                                            <div class="score-progress" id="behavioralScoreBar" style="width: 0%;"></div>
                                        </div>
                                    </div>
                                    <div class="score-details mt-3">
                                        <div class="score-strengths">
                                            <h5>Strengths</h5>
                                            <ul id="behavioralStrengths"><li>Loading...</li></ul>
                                        </div>
                                        <div class="score-weaknesses">
                                            <h5>Areas to Improve</h5>
                                            <ul id="behavioralWeaknesses"><li>Loading...</li></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
    
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3>Key Improvement Areas</h3>
                        </div>
                        <div class="card-body">
                            <div id="keyImprovementAreas">
                                <p class="text-center">Loading improvement areas...</p>
                            </div>
                        </div>
                    </div>
    
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3>Interview Transcript</h3>
                        </div>
                        <div class="card-body">
                            <div id="interviewTranscript" class="interview-transcript">
                                <p class="text-center">Loading transcript...</p>
                            </div>
                        </div>
                    </div>
    
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3><i class="fas fa-lightbulb me-2"></i> Suggested Answers & Rationale</h3>
                        </div>
                        <div class="card-body">
                            <p class="text-muted small">Here are some strong ways you could have answered the interviewer's questions, tailored to your profile.</p>
                            <div id="suggestedAnswersAccordion" class="accordion">
                                <div class="text-center p-3">
                                    <div class="spinner-border spinner-border-sm text-primary" role="status">
                                        <span class="visually-hidden">Loading...</span>
                                    </div>
                                    <span class="ms-2">Loading suggested answers...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="btn btn-primary" id="startNewInterviewBtn">Start New Interview</button>
                        <button class="btn btn-secondary" id="viewProgressBtn">View Progress History</button>
                    </div>
                </div> 
            </section>


            <!-- Progress History -->
            <section id="history" class="content-section">
                <div class="container">
                    <h2>Progress History</h2>
                    <p class="section-description">Track your improvement across multiple mock interviews</p>
                    
                    <div class="card mb-4">
                        <div class="card-header">
                            <h3>Performance Trends</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="progressChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3>Improvement Summary</h3>
                                </div>
                                <div class="card-body">
                                    <div id="improvementSummary">
                                        <p class="text-center">Loading improvement summary...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-4">
                                <div class="card-header">
                                    <h3>Past Interviews</h3>
                                </div>
                                <div class="card-body">
                                    <div id="pastInterviewsList" class="past-interviews-list">
                                        <p class="text-center">Loading past interviews...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button class="btn btn-primary" id="startAnotherInterviewBtn">Start Another Interview</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Modal for camera/microphone permissions -->
    <div class="modal fade" id="permissionsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Camera & Microphone Access</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>IRIS needs access to your camera and microphone to provide a realistic interview experience.</p>
                    <p>We use your camera to:</p>
                    <ul>
                        <li>Create a realistic interview setting</li>
                        <li>Help you maintain proper eye contact and posture</li>
                        <li>Analyze your visual engagement during the interview</li>
                        <li>Provide real-time feedback on your interview presence</li>
                    </ul>
                    <p>You'll receive personalized feedback on your visual engagement after the interview, including:</p>
                    <ul>
                        <li>Eye contact consistency</li>
                        <li>Body positioning analysis</li>
                        <li>Tips for improving your visual presence</li>
                    </ul>
                    <p class="text-info"><i class="fas fa-info-circle"></i> Your privacy is important - all processing happens in your browser and no video is stored.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="grantPermissionsBtn">Grant Access</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Face-API.js -->
    <script src="https://cdn.jsdelivr.net/npm/face-api.js@0.22.2/dist/face-api.min.js"></script>
    
    <!-- Application Scripts -->
    <script src="app.js"></script>
</body>
</html>